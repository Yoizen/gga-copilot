# ðŸ¤– Guardian Agent

**Provider-agnostic AI code review** â€” Enforce coding standards on every commit using Claude, Gemini, Codex, Ollama, or any LLM. **Pure Bash** (Linux/Mac) or **PowerShell** (Windows).

![Version](https://img.shields.io/badge/version-2.2.0-blue.svg) ![License](https://img.shields.io/badge/license-MIT-green.svg) ![Tests](https://img.shields.io/badge/tests-68%20passing-brightgreen.svg)

## ðŸš€ Quick Install

### One-Liner Commands

**Windows (PowerShell):**
```powershell
iex (irm https://raw.githubusercontent.com/Yoizen/gga-copilot/main/auto/bootstrap.ps1)
```

**macOS/Linux (Bash):**
```bash
bash <(curl -s https://raw.githubusercontent.com/Yoizen/gga-copilot/main/auto/bootstrap.sh)
```

**See [auto/README.md](auto/README.md) for advanced options.**

---

## Why?

Automate code review enforcement on every commit. Validate staged files against your `REVIEW.md` rulesâ€”like having a senior developer review every line before it hits the repo.

## Quick Start

```bash
cd ~/your-project
gga init               # Create .gga config (default: copilot:claude-haiku-4.5)
touch REVIEW.md        # Create your coding standards
gga install            # Install pre-commit hook
git add . && git commit -m "feat: done"  # Review runs automatically âœ…
```

## Configuration

### `.gga` Config File (Auto-generated by `gga init`)

```bash
PROVIDER="copilot:claude-haiku-4.5"        # AI provider (default)
FILE_PATTERNS="*.ts,*.tsx,*.js,*.jsx"     # Files to review
EXCLUDE_PATTERNS="*.test.ts,*.spec.ts"    # Files to skip
RULES_FILE="REVIEW.md"                    # Your rules file
STRICT_MODE="true"                        # Fail on ambiguous responses
```

### `REVIEW.md` Rules File

```markdown
# Code Review Rules

## TypeScript
- No `any` types - use proper typing
- Use `const` over `let` when possible
- Prefer interfaces over type aliases

## React
- Use functional components with hooks
- No `import * as React` - use named imports
- All images must have alt text

## Testing
- All new features need tests
- Test files must be co-located with source
```

### Templates

Pre-configured templates available:
- **`.gga.copilot-claude-haiku-template`** â€” GitHub Copilot with Claude Haiku 4.5 (lightweight, fast)

## Commands

| Command | Description |
|---------|-------------|
| `gga init` | Create sample `.gga` config |
| `gga install` | Install pre-commit hook |
| `gga uninstall` | Remove pre-commit hook |
| `gga run` | Run review on staged files |
| `gga run --no-cache` | Force review ignoring cache |
| `gga config` | Display current configuration |
| `gga cache status` | Show cache status |
| `gga cache clear` | Clear project cache |
| `gga cache clear-all` | Clear all cached data |
| `gga help` | Show all commands |
| `gga version` | Show version |

## Providers

| Provider | Config |
|----------|--------|
| **Claude** | `claude` |
| **Gemini** | `gemini` |
| **GitHub Copilot** | `copilot:claude-haiku-4.5` |

Edit `.gga` to change provider.

## Smart Caching

Automatically skips unchanged files for faster reviews. Cache invalidates when `REVIEW.md` or `.gga` changes.

```bash
gga cache status      # Check cache
gga cache clear       # Clear for current project
gga cache clear-all   # Clear all projects
gga run --no-cache    # Force full review
```

## How It Works

```
git commit
    â†“
1. Load config (.gga)
2. Validate provider installed
3. Check rules file (REVIEW.md) exists
4. Get staged files matching patterns
5. Read coding rules
6. Send rules + files to AI
7. Parse response (PASSED/FAILED)
8. Allow/block commit
```

## Integration

**Git Hook** (default): `gga install` installs pre-commit hook automatically.

**Husky**, **pre-commit**, **Lefthook**: See [auto/README.md](auto/README.md) for setup.

## Bypass Review

```bash
git commit --no-verify -m "wip: work in progress"
git commit -n -m "hotfix: urgent fix"
```

## Troubleshooting

**"Provider not found"**
```bash
which claude  # Verify provider is in PATH
echo "Say hello" | claude --print  # Test provider
```

**"Rules file not found"**
```bash
touch REVIEW.md
echo "# My Coding Standards" > REVIEW.md
```

**"Ambiguous response" in Strict Mode**
- Try Claude (most reliable)
- Simplify your rules file
- Temporarily disable: `STRICT_MODE="false"`

## Development

```bash
make test          # Run all tests (68 total)
make test-unit     # Unit tests only
make test-integration  # Integration tests only
make check         # Lint and test
```

## Project Structure

```
gentleman-guardian-angel/
â”œâ”€â”€ bin/gga                    # Main CLI script
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ providers.sh           # AI provider implementations
â”‚   â””â”€â”€ cache.sh               # Smart caching
â”œâ”€â”€ spec/                      # Test suite (68 tests)
â”œâ”€â”€ Makefile
â”œâ”€â”€ install.sh
â”œâ”€â”€ uninstall.sh
â””â”€â”€ README.md
```

## License

MIT Â© 2026

---


Run copilot api
cd ~/.local/share/yoizen/copilot-api && npm start -- start 

